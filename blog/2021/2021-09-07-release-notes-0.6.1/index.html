<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.110.0"><meta name=description content="Our latest Velociraptor release contains many new features and bug fixes. This post outlines some of the more interesting changes.
"><link rel=icon href=/images/favicon.png type=image/png><title>Velociraptor 0.6.1 Release :: Velociraptor - Digging deeper!</title><link href=/css/nucleus.css?1674201363 rel=stylesheet><link href=/css/fontawesome-all.min.css?1674201363 rel=stylesheet><link href=/css/featherlight.min.css?1674201363 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1674201363 rel=stylesheet><link href=/css/auto-complete.css?1674201363 rel=stylesheet><link href=/css/theme.css?1674201363 rel=stylesheet><link href=/css/tabs.css?1674201363 rel=stylesheet><link href=/css/hugo-theme.css?1674201363 rel=stylesheet><link href=/css/theme-mine.css?1674201363 rel=stylesheet><link href=/css/dark.css?1674201363 rel=stylesheet><link href=/css/syntax.css?1674201363 rel=stylesheet><link href=/css/light.css?1674201363 rel=stylesheet><link href=/css/hljs.css?1674201363 rel=stylesheet><link href=https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css?1674201363 rel=stylesheet><script src=/js/jquery-3.3.1.min.js?1674201363></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style><script async src="https://www.googletagmanager.com/gtag/js?id=G-QYH72LMYCS"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-QYH72LMYCS",{anonymize_ip:!1})}</script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-QYH72LMYCS","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script>
<script></script></head><body data-url=/blog/2021/2021-09-07-release-notes-0.6.1/><nav id=sidebar><div id=header-wrapper><div id=header><script>function darkmode(){$("body").addClass("dark").removeClass("light"),document.cookie="theme=darkmode;path=/"}function lightmode(){$("body").removeClass("dark").addClass("light"),document.cookie="theme=lightmode;path=/"}const regex=new RegExp("theme=darkmode");regex.test(document.cookie)?darkmode():lightmode()</script><div class="btn btn-default ThemeSelector darkmode" onclick=darkmode()><i class="fas fa-moon"></i></div><div class="btn btn-default ThemeSelector lightmode" onclick=lightmode()><i class="fas fa-sun"></i></div><a href=https://docs.velociraptor.app/><img src=https://docs.velociraptor.app//images/logo.svg></a></div></div><div class=highlightable><ul class=topics><li data-nav-id=https://docs.velociraptor.app/announcements/ class="dd-item haschildren"><div><i class="fa fa-angle-right fa-sm category-icon"></i>
<a href=/announcements/><i class="fas fa-bullhorn"></i>Announcements</a></div><ul><li data-nav-id=https://docs.velociraptor.app/announcements/2023-cves/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/announcements/2023-cves/>Current CVEs</a></div></li></ul></li><li data-nav-id=https://docs.velociraptor.app/docs/ class="dd-item haschildren"><div><i class="fa fa-angle-right fa-sm category-icon"></i>
<a href=/docs/><i class="fas fa-book-reader"></i>Documentation</a></div><ul><li data-nav-id=https://docs.velociraptor.app/docs/overview/ class="dd-item haschildren"><div><i class="fa fa-angle-right fa-sm category-icon"></i>
<a href=/docs/overview/>Velociraptor Overview</a></div><ul><li data-nav-id=https://docs.velociraptor.app/docs/overview/history/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/docs/overview/history/>History</a></div></li><li data-nav-id=https://docs.velociraptor.app/docs/overview/support/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/docs/overview/support/>Support Policy</a></div></li></ul></li><li data-nav-id=https://docs.velociraptor.app/docs/deployment/ class="dd-item haschildren"><div><i class="fa fa-angle-right fa-sm category-icon"></i>
<a href=/docs/deployment/>Deployment</a></div><ul><li data-nav-id=https://docs.velociraptor.app/docs/deployment/self-signed/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/docs/deployment/self-signed/>Self-Signed SSL</a></div></li><li data-nav-id=https://docs.velociraptor.app/docs/deployment/cloud/ class="dd-item haschildren"><div><i class="fa fa-angle-right fa-sm category-icon"></i>
<a href=/docs/deployment/cloud/>Cloud Deployment</a></div><ul><li data-nav-id=https://docs.velociraptor.app/docs/deployment/cloud/multifrontend/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/docs/deployment/cloud/multifrontend/>Multi-Frontend</a></div></li></ul></li><li data-nav-id=https://docs.velociraptor.app/docs/deployment/clients/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/docs/deployment/clients/>Deploying Clients</a></div></li><li data-nav-id=https://docs.velociraptor.app/docs/deployment/rbac/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/docs/deployment/rbac/>Users and Roles</a></div></li><li data-nav-id=https://docs.velociraptor.app/docs/deployment/resources/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/docs/deployment/resources/>Performance</a></div></li><li data-nav-id=https://docs.velociraptor.app/docs/deployment/troubleshooting/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/docs/deployment/troubleshooting/>Troubleshooting</a></div></li><li data-nav-id=https://docs.velociraptor.app/docs/deployment/references/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/docs/deployment/references/>Config Reference</a></div></li></ul></li><li data-nav-id=https://docs.velociraptor.app/docs/gui/ class="dd-item haschildren"><div><i class="fa fa-angle-right fa-sm category-icon"></i>
<a href=/docs/gui/>The Admin GUI</a></div><ul><li data-nav-id=https://docs.velociraptor.app/docs/gui/clients/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/docs/gui/clients/>Inspecting clients</a></div></li><li data-nav-id=https://docs.velociraptor.app/docs/gui/vfs/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/docs/gui/vfs/>The VFS</a></div></li><li data-nav-id=https://docs.velociraptor.app/docs/gui/artifacts/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/docs/gui/artifacts/>Artifacts</a></div></li><li data-nav-id=https://docs.velociraptor.app/docs/gui/hunting/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/docs/gui/hunting/>Hunting</a></div></li></ul></li><li data-nav-id=https://docs.velociraptor.app/docs/vql/ class="dd-item haschildren"><div><i class="fa fa-angle-right fa-sm category-icon"></i>
<a href=/docs/vql/>VQL Fundamentals</a></div><ul><li data-nav-id=https://docs.velociraptor.app/docs/vql/notebooks/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/docs/vql/notebooks/>Notebooks</a></div></li><li data-nav-id=https://docs.velociraptor.app/docs/vql/artifacts/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/docs/vql/artifacts/>Artifacts</a></div></li><li data-nav-id=https://docs.velociraptor.app/docs/vql/events/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/docs/vql/events/>Event Queries</a></div></li></ul></li><li data-nav-id=https://docs.velociraptor.app/docs/forensic/ class="dd-item haschildren"><div><i class="fa fa-angle-right fa-sm category-icon"></i>
<a href=/docs/forensic/>Forensic Analysis</a></div><ul><li data-nav-id=https://docs.velociraptor.app/docs/forensic/filesystem/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/docs/forensic/filesystem/>Searching Filenames</a></div></li><li data-nav-id=https://docs.velociraptor.app/docs/forensic/searching/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/docs/forensic/searching/>Searching Content</a></div></li><li data-nav-id=https://docs.velociraptor.app/docs/forensic/ntfs/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/docs/forensic/ntfs/>NTFS Analysis</a></div></li><li data-nav-id=https://docs.velociraptor.app/docs/forensic/binary/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/docs/forensic/binary/>Binary parsing</a></div></li><li data-nav-id=https://docs.velociraptor.app/docs/forensic/evidence_of_execution/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/docs/forensic/evidence_of_execution/>Evidence Of Execution</a></div></li><li data-nav-id=https://docs.velociraptor.app/docs/forensic/event_logs/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/docs/forensic/event_logs/>Event Logs</a></div></li><li data-nav-id=https://docs.velociraptor.app/docs/forensic/volatile/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/docs/forensic/volatile/>Volatile State</a></div></li></ul></li><li data-nav-id=https://docs.velociraptor.app/docs/offline_triage/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/docs/offline_triage/>Triage and acquisition</a></div></li><li data-nav-id=https://docs.velociraptor.app/docs/client_monitoring/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/docs/client_monitoring/>Client Monitoring</a></div></li><li data-nav-id=https://docs.velociraptor.app/docs/extending_vql/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/docs/extending_vql/>Extending VQL</a></div></li><li data-nav-id=https://docs.velociraptor.app/docs/server_automation/ class="dd-item haschildren"><div><i class="fa fa-angle-right fa-sm category-icon"></i>
<a href=/docs/server_automation/>Server Automation</a></div><ul><li data-nav-id=https://docs.velociraptor.app/docs/server_automation/server_api/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/docs/server_automation/server_api/>Server API</a></div></li><li data-nav-id=https://docs.velociraptor.app/docs/server_automation/server_monitoring/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/docs/server_automation/server_monitoring/>Server Monitoring</a></div></li></ul></li></ul></li><hr><li data-nav-id=https://docs.velociraptor.app/vql_reference/ class="dd-item haschildren"><div><i class="fa fa-angle-right fa-sm category-icon"></i>
<a href=/vql_reference/><i class="fas fa-book"></i>VQL Reference</a></div><ul><li data-nav-id=https://docs.velociraptor.app/vql_reference/basic/ class="dd-item haschildren"><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/vql_reference/basic/>Basic VQL</a></div></li><li data-nav-id=https://docs.velociraptor.app/vql_reference/linux/ class="dd-item haschildren"><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/vql_reference/linux/>Linux Specific</a></div></li><li data-nav-id=https://docs.velociraptor.app/vql_reference/windows/ class="dd-item haschildren"><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/vql_reference/windows/>Windows Specific</a></div></li><li data-nav-id=https://docs.velociraptor.app/vql_reference/parsers/ class="dd-item haschildren"><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/vql_reference/parsers/>Parsers</a></div></li><li data-nav-id=https://docs.velociraptor.app/vql_reference/server/ class="dd-item haschildren"><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/vql_reference/server/>Server Side</a></div></li><li data-nav-id=https://docs.velociraptor.app/vql_reference/plugin/ class="dd-item haschildren"><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/vql_reference/plugin/>Client Side</a></div></li><li data-nav-id=https://docs.velociraptor.app/vql_reference/event/ class="dd-item haschildren"><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/vql_reference/event/>Event Plugins</a></div></li><li data-nav-id=https://docs.velociraptor.app/vql_reference/experimental/ class="dd-item haschildren"><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/vql_reference/experimental/>Experimental</a></div></li><li data-nav-id=https://docs.velociraptor.app/vql_reference/misc/ class="dd-item haschildren"><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/vql_reference/misc/>Misc</a></div></li></ul></li><li data-nav-id=https://docs.velociraptor.app/training/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/training/><i class="fas fa-graduation-cap"></i>Training</a></div></li><li data-nav-id=https://docs.velociraptor.app/blog/ class="dd-item parent haschildren"><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/blog/><i class="fas fa-newspaper"></i>Blog</a></div></li><li data-nav-id=https://docs.velociraptor.app/presentations/ class="dd-item haschildren"><div><i class="fa fa-angle-right fa-sm category-icon"></i>
<a href=/presentations/><i class="fas fa-chalkboard-teacher"></i>Presentations</a></div><ul><li data-nav-id=https://docs.velociraptor.app/presentations/2022_linuxconf_au/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/presentations/2022_linuxconf_au/>Linux Conf Au 2022</a></div></li><li data-nav-id=https://docs.velociraptor.app/presentations/2022_auscert/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/presentations/2022_auscert/>Auscert 2022</a></div></li><li data-nav-id=https://docs.velociraptor.app/presentations/2022_dfrws_us/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/presentations/2022_dfrws_us/>DFRWS US 2022</a></div></li><li data-nav-id=https://docs.velociraptor.app/presentations/2022_tech_user_group_cbr/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/presentations/2022_tech_user_group_cbr/>Tech Users Group 2022</a></div></li><li data-nav-id=https://docs.velociraptor.app/presentations/2022_sans_summit/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/presentations/2022_sans_summit/>SANS Summit 2022</a></div></li><li data-nav-id=https://docs.velociraptor.app/presentations/2022_velocon/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/presentations/2022_velocon/>Velocon 2022</a></div></li><li data-nav-id=https://docs.velociraptor.app/presentations/2022_dfrws_apac/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/presentations/2022_dfrws_apac/>DFRWS APAC 2022</a></div></li></ul></li><li data-nav-id=https://docs.velociraptor.app/exchange/ class="dd-item haschildren"><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/exchange/><i class="fas fa-code"></i>Artifact Exchange</a></div></li><li data-nav-id=https://docs.velociraptor.app/artifact_references/ class="dd-item haschildren"><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/artifact_references/><i class="fas fa-book"></i>Artifact Reference</a></div></li><li data-nav-id=https://docs.velociraptor.app/knowledge_base/ class="dd-item haschildren"><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/knowledge_base/><i class="fas fa-brain"></i>Knowledge Base</a></div></li><li data-nav-id=https://docs.velociraptor.app/search/ class=dd-item><div><i class="fa fa-circleXX fa-sm category-icon"></i>
<a href=/search/><i class='fas fa-search'></i>Search</a></div></li></ul><hr><section id=shortcuts><h3></h3><ul><li><a class=padding href=https://github.com/Velocidex/velociraptor><i class='fab fa-github'></i>Github</a></li><li><a class=padding href=https://docs.velociraptor.app/discord/><i class='fab fa-discord'></i>Discord</a></li><li><a class=padding href=mailto:velociraptor-discuss@googlegroups.com><i class='fas fa-envelope'></i>Mailing List</a></li><li><a class=padding href=https://docs.velociraptor.app/rss/><i class='fas fa-rss'></i>RSS</a></li></ul></section><section id=footer><div class=footer-copyright>Brought to you by
<img src=/images/Rapid7_logo.svg class=rapid7><br><i class="fas fa-copyright"></i> 2022</div></section></div></nav><script>$("#sidebar i.fa-angle-right").each(function(){$(this).parent().parent().find("ul").hide()})</script><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=top-github-link><a class=github-link title='Edit this page' href=https://github.com/Velocidex/velociraptor-docs/edit/master/content/blog/2021/2021-09-07-release-notes-0.6.1/_index.md target=blank><i class="fas fa-code-branch"></i>
<span id=top-github-link-text>Edit this page</span></a></div><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links>Velociraptor 0.6.1 Release</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#gui-visible-changes>GUI Visible changes</a><ul><li><a href=#most-recently-used>Most Recently Used</a></li><li><a href=#free-disk-space>Free disk space</a></li><li><a href=#quarantine-hosts>Quarantine hosts</a></li><li><a href=#notebook-full-screen>Notebook full screen</a></li><li><a href=#favorite-collections>Favorite collections</a></li><li><a href=#event-monitoring-tables>Event Monitoring tables</a></li><li><a href=#timelines>Timelines</a></li></ul></li><li><a href=#vql-changes>VQL Changes</a><ul><li><a href=#starlark-is-now-available-in-vql>Starlark is now available in VQL</a></li><li><a href=#functions-that-manipulate-endpoint-state>Functions that manipulate endpoint state</a></li><li><a href=#server-side-vql-functions>Server side VQL functions</a></li></ul></li><li><a href=#notable-artifacts>Notable artifacts</a><ul><li><a href=#carving-cobalt-strike-configurations-from-memory>Carving Cobalt Strike configurations from memory</a></li></ul></li><li><a href=#other-changes>Other changes</a><ul><li><a href=#client-index-rewrite>Client index rewrite</a></li></ul></li></ul></nav></div></div></div></div><div id=head-tags><div class=tags><a class=tag-link href=/tags/release>Release</a></div></div><div id=body-inner><h1>Velociraptor 0.6.1 Release</h1><div class="author pull-right">Mike Cohen
<span class=date>2021-09-06</span></div><p>I am very excited to announce the latest Velociraptor release
0.6.1. This release has been in the making for a few months now and
has a lot of new features. I wanted to take some time to tell you all
about it in our blog so I can show some of the new screenshots in more
detail.</p><h2 id=gui-visible-changes>GUI Visible changes</h2><h3 id=most-recently-used>Most Recently Used</h3><p>One of my favorite new features is the new <code>Most Recently Used</code> (MRU)
list in the GUI. Typically, a Velociraptor deployment may contain many
thousands of clients, but an investigator typically only interacts
with a few relevant hosts. While you could always search for the hosts
you are interested in, Velociraptor now keeps a most recently used
list in each user&rsquo;s profile, making it easy to go back to a host under
investigation.</p><p><figure><img src=mru.png alt="Most recently used clients" class=captioned><figcaption>Most recently used clients</figcaption></figure></p><p>You don&rsquo;t have to do anything to get hosts added to the MRU list,
simply search for them normally and select the client to interact
with. The MRU list is sorted in most recent order so it should always
contain relevant hosts.</p><div class="mynotices note"><div heading=note><p>Although it might appear by the search term, that you can view other
user&rsquo;s most recently used list this is not the case - each user has
their own list of hosts. The username after the <code>recent:</code> is currently
ignored.</p></div></div><h3 id=free-disk-space>Free disk space</h3><p>Many users asked to be able to see the free disk space available in
the dashboard. This is useful to keep an eye during investigations. If
the disk fills up during a large hunt, the client connections will
fail to upload data. Since Velociraptor does not know which specific
filesystem contains your file store, it just shows the total disk
space in all mounted filesystems.</p><p><figure><img src=df.png alt="Free disk space" class=captioned><figcaption>Free disk space</figcaption></figure></p><h3 id=quarantine-hosts>Quarantine hosts</h3><p>Velociraptor allows users to quarantine hosts using the
<code>Windows.Remediation.Quarantine</code> artifact. This artifact updates the
client&rsquo;s firewall rules so it can only communicate with the
Velociraptor server, and some limited exceptions. When a host is
quarantined, no network connections are successful, but the
investigator can still communicate with the host using Velociraptor.</p><p>This feature is useful in cases when time is of the essence and it
made sense to expose the feature right in the GUI. From the host overview screen, simply click &ldquo;Quarantine this host&rdquo;:</p><p><figure><img src=quarantine.png alt="Host overview page" class=captioned><figcaption>Host overview page</figcaption></figure></p><p>You may also add a message for the logged in user</p><p><figure><img src=quarantine-1.png alt="Quarantine a host" class=captioned><figcaption>Quarantine a host</figcaption></figure></p><p>At this point the machine is quarantined. It gains a label of
Quarantine which indicates to the system that the client is
quarantined.</p><p><figure><img src=quarantine-2.png alt="A host is quarantined" class=captioned><figcaption>A host is quarantined</figcaption></figure></p><div class="mynotices note"><div heading=" How is quarantine status managed? "><p>Velociraptor uses labels to place host into <code>Label Groups</code>. This is
used to control the types of monitoring artifacts that are running on
the client. It is actually the <code>Quarantine</code> label that makes the host
quarantine itself because the <code>Windows.Remediation.QuarantineMonitor</code>
artifact is assigned to the Quarantine label group.</p><p>The host will continuously check that it is quarantined as long as the
label is set. This means the quarantine status also survives a reboot!</p><p>To remove the host from the Quarantine group, simply remove the label
or click the &ldquo;Unquarantine Host&rdquo; button. This will immediately release
the host from the quarantine.</p></div></div><h3 id=notebook-full-screen>Notebook full screen</h3><p>Velociraptor Notebooks have always been the best way for running and
exploring VQL queries. The notebooks are a collaborative shared
document, allowing a group of investigators to share their work and
analysis.</p><p>The new full screen mode allows an uninterrupted view of the notebook
as a shared document. Other GUI elements are hidden and the notebook
takes on full screen.</p><p><figure><img src=full-screen.png alt="Switch to full screen notebook" class=captioned><figcaption>Switch to full screen notebook</figcaption></figure></p><p>You can switch back from full screen mode by simply clicking the button.</p><p><figure><img src=full-screen-back.png alt="Full screen notebook" class=captioned><figcaption>Full screen notebook</figcaption></figure></p><p>Note that the URL contains the full screen mode so you can share a
notebook URL with your team already in full screen.</p><h3 id=favorite-collections>Favorite collections</h3><p>If you are like me and often use the same combination of artifacts
with similar parameters, but are just too lazy to create a custom
artifact that combines them all, you might enjoy the latest <code>Favorite</code>
feature. Simply click the <code>Save Favorite</code> button when a collection is
selected.</p><p><figure><img src=favorite-1.png alt="Saving a favorite collection" class=captioned><figcaption>Saving a favorite collection</figcaption></figure></p><p>This will save the specific combination of artifacts to collect as
well as their parameters used in the previous collection under a name.</p><p><figure><img src=favorite-2.png alt="Saving a favorite collection" class=captioned><figcaption>Saving a favorite collection</figcaption></figure></p><p>Now when we create a new collection, we can retrieve the favorite
collection by name</p><p><figure><img src=favorite-3.png alt="Retrieving a favorite collection" class=captioned><figcaption>Retrieving a favorite collection</figcaption></figure></p><div class="mynotices note"><div heading=" How are favorites managed? "><p>Favorites are currently stored in the GUI user&rsquo;s profiles so each user
can maintain their own list of favorites. However you can save a
favorite into your own profile using the
<a href=/vql_reference/server/#favorites_save>favorite_save</a> VQL function,
so a team may create a set of common favorites using a SERVER VQL
artifact.</p></div></div><h3 id=event-monitoring-tables>Event Monitoring tables</h3><p>Velociraptor&rsquo;s <code>CLIENT_EVENT</code> artifacts run an event query on the
client and stream the results back to the server. This can be used to
create sophisticated monitoring rules on the endpoint.</p><p>In the latest release these events are now indexed by time which
allows for a much more flexible UI experience.</p><p>You can view the results from the client&rsquo;s monitoring artifacts by
clicking the <code>Client Events</code> screen and selecting the specific event
artifact you want to see.</p><p><figure><img src=event-monitoring.png alt="Client Event Monitoring view" class=captioned><figcaption>Client Event Monitoring view</figcaption></figure></p><p>The view is split into two halves. The top half is the timeline view
while the bottom half is the table view. The events can be viewed in
the table, while the timeline view provides a quick way to navigate
different time ranges.</p><p>You can see the timeline view is split into three rows:</p><ol><li><code>Table View</code> visualizes the time range visible in the table currently.</li><li><code>Available</code> shows the days which have any events in them.</li><li><code>Logs</code> visualizes the days that have any logs in them (You can view query logs by selecting the <code>Logs</code> pull down on the top right).</li></ol><p>In order to keep the table brief the timestamps are abbreviated - you
can hover the mouse over those to get the full timestamp. Usually the
exact timestamp in the table is not important as we can see a
visualization of the time range in the timeline above.</p><p>You can zoom in and out of the visible time ranges using <code>Ctrl-Mouse Wheel</code> or by clicking the timeline itself.</p><p><figure><img src=event-monitoring-1.png alt="Interacting with the timeline" class=captioned><figcaption>Interacting with the timeline</figcaption></figure></p><p>By clicking the tool bar it is possible to page through the table to
view visible events. If you need to export the data, simply click the
<code>Export</code> button and select either JSON or CSV format. The export
functionality applies to the visible time range so you can finely tune
which events should be exported (simply zoom the visible range in or
out).</p><h3 id=timelines>Timelines</h3><p>One of the most exciting new features in 0.6.1 is the new built in
timeline functionality. What is a timeline? It is a way to visualize
time based rows from multiple sources. The main concepts to understand
are the <code>Super Timeline</code> and the <code>Timeline</code>.</p><p>A super timeline is a grouping of several timelines together (you can
see them on the same timeline, turn each on or off etc). You can add
child timelines to a super-timeline to be able to compare them
together by seeing their separate events together.</p><p>A timeline is just a series of rows keyed on a time column - the rows
can be anything at all, as long as a single column is specified as the
time column and it is sorted by time order.</p><p>It is even possible (and necessary) to add the same rows multiple
times to each super timeline, each time having a different key column.</p><h4 id=adding-timelines>Adding timelines</h4><p>The first step is to view a table in a notebook - any table generated
using any query. In the example below, I collected the MFT then post
processed it by filtering it. Once I can see a table with some
results in it, I can add the table to the super timeline.</p><p>In this example I just collected the MFT from the client. The full MFT
has about 380k rows, but in practice I might be able to filter it down
by date range or file type so the total size of the table is not too
large.</p><p><figure><img src=timeline-1.png alt="Post Processing results from a collection" class=captioned><figcaption>Post Processing results from a collection</figcaption></figure></p><p>Next I can add the table to the Super Timeline by generating a
timeline from it. I simply click the <code>timeline</code> icon at the tool bar
of each table. Velociraptor will then present the timeline dialog.</p><p><figure><img src=timeline-2.png alt="Importing a table into the timeline" class=captioned><figcaption>Importing a table into the timeline</figcaption></figure></p><p>When adding a timeline to a super timeline, I need to specify the
Supertimeline&rsquo;s name (If there is no super timeline yet, I can create
a new one). Then I can specify the child timeline&rsquo;s name and a time
column to use as the index.</p><p><figure><img src=timeline-3.png alt="Adding timeline details" class=captioned><figcaption>Adding timeline details</figcaption></figure></p><p>In this case I will add the Created times from the MFT to the timeline
<code>MFT Analysis</code>. Velociraptor will sort the table on the Created Time and will add the timeline to the super timeline.</p><p>Since I do not have a Super Timeline yet, I can create a new one by
starting to type in the box. Later I can add other timelines from any
tables to the same supertimeline.</p><p><img src=timeline-4.png alt></p><h4 id=viewing-timelines>Viewing timelines</h4><p>Once this is done, nothing appears to have happened! But really the
supertimeline is added to the notebook. We just need to view it.</p><p>Timelines are simply rendered through special markdown syntax. I can
just add a new cell with the timeline in it.</p><p><figure><img src=timeline-5.png alt="Adding a timeline cell to the notebook" class=captioned><figcaption>Adding a timeline cell to the notebook</figcaption></figure></p><p>Choose which timeline to add.</p><p><figure><img src=timeline-6.png alt="Selecting the supertimeline name" class=captioned><figcaption>Selecting the supertimeline name</figcaption></figure></p><p>And we get to see the super timeline (which currently has only one
timeline). It is actually a bit easier to see with full screen so I
recommend to switch to that now.</p><h4 id=inspecting-timelines>Inspecting timelines</h4><p>The cell is divided into two: At the top we see the timeline - it has
a bar for each child timeline added as well as the top bar
representing the visible range of the table.</p><p><figure><img src=timeline-7.png alt="Inspecting a timeline in the notebook" class=captioned><figcaption>Inspecting a timeline in the notebook</figcaption></figure></p><p>Below the timeline we see the table of all the events from all
timelines intermixed. The table has two columns, on the left is the
event time, while on the right are all the other fields of the
original table row. You can expand and contract each row to see more
data. Note that the columns we see here are actually the same columns
in the original table that was added to the timeline, so we can always
tweak the original table VQL to only present the columns we care about
and make sure it is not too crowded here.</p><p>You can zoom the time in and out by clicking the year or month headers,
but I find it easier to just <code>Ctrl-Mouse Scroll</code>.</p><p><figure><img src=timeline-8.png alt="Table View time range is visualized on the timeline" class=captioned><figcaption>Table View time range is visualized on the timeline</figcaption></figure></p><p>You can either step through the table using the regular next/previous
buttons or you can click on any time you like.</p><p><figure><img src=timeline-9.png alt="Inspecting the timeline" class=captioned><figcaption>Inspecting the timeline</figcaption></figure></p><p>When you add other timelines to the same Super-timeline you will see
the events in order on the same table rendered with different
colors. You can turn a child timeline on or off by unchecking the name
of the child timeline within the timeline view.</p><h2 id=vql-changes>VQL Changes</h2><p>In this release there are many improvements to the VQL language
including new plugins, functions and enhanced capability. Let&rsquo;s talk
about some of the interesting changes.</p><h3 id=starlark-is-now-available-in-vql>Starlark is now available in VQL</h3><p>VQL has always been more of a glue language - connecting the results
of multiple plugins, filtering and some basic manipulation of the
results. Although VQL is getting more powerful all the time, sometimes
it is just easier to do more complicated operations in a more
traditional language, such as Python.</p><p><a href=https://github.com/bazelbuild/starlark>Starlark</a> is a mini-python
interpreter that can be embedded into Go programs. Velociraptor now
features a starlark interpreter built in! This is useful when you need
to perform more intricate functional style of programming.</p><p>Here is a very simple example</p><pre><code class=language-vql>LET StarCode = starl(code='''
def Foo(x):
   return x + 2
''')

SELECT StarCode.Foo(x=2)
FROM scope()
</code></pre><p>The first statement defines a Starlark module by simply calling the
<code>starl()</code> function on some python code. The <code>starl()</code> function
compiles the code into a module. VQL queries can then access code
within the Starlark module by just calling is as normal. This is most
helpful when we need to do specific manipulation of strings, numbers
etc.</p><h3 id=functions-that-manipulate-endpoint-state>Functions that manipulate endpoint state</h3><p>When we first designed Velociraptor we wanted it to be a read only,
forensic system. However, as people use Velociraptor more and more for
<code>Response</code> we realized that the R in DFIR requires the tool to
actively change the endpoint! Whether it is to uninstall malware,
correct a vulnerability, or cut off access to a compromised system, we
needed the ability to change settings on the endpoint.</p><p>That is why the latest release introduces a number of new VQL
functions, such as <code>rm</code>, <code>reg_set_value</code>,<code>reg_rm_value</code> and <code>reg_rm_key</code>
that allow VQL queries to modify the registry or files.</p><h3 id=server-side-vql-functions>Server side VQL functions</h3><p>On the server, Velociraptor now has the <code>user_delete()</code> and
<code>user_create()</code> to manipulate GUI users. This allows for VQL to
automate initial server provisioning by adding the right users to a
new server.</p><p>We also have the ability to enrich IP addresses via the <code>geoip()</code> VQL
function. This function allows using a MaxMind database to resolve IP
addresses to location.</p><h2 id=notable-artifacts>Notable artifacts</h2><h3 id=carving-cobalt-strike-configurations-from-memory>Carving Cobalt Strike configurations from memory</h3><p>The <code>Windows.Carving.CobaltStrike</code> artifact can now carve and decode
the CobaltStrike configuration from memory. This is very helpful to
identify the C&C and other configuration parameters encoded within the
configuration.</p><p><figure><img src=cs.png alt="Uncovering Cobalt Strike Config from memory" class=captioned><figcaption>Uncovering Cobalt Strike Config from memory</figcaption></figure></p><h2 id=other-changes>Other changes</h2><h3 id=client-index-rewrite>Client index rewrite</h3><p>The client index is used in Velociraptor to quickly search for clients
in the GUI. Previously this was implemented in a way that proved very
inefficient on network volumes like EFS. The index has been upgraded
in 0.6.1 to a more performant structure.</p><p>The index will be converted to the new format when the latest 0.6.1
Velociraptor is started for the first time. On EFS volume conversion
might take a while (several hours) due to the underlying slow
filesystem. Once this conversion is complete it need not be done
again.</p><p>The new index performs well above 20k clients on EFS (Previously only
SSD was usable at these numbers).</p><p>If you liked the new features, take <a href=https://github.com/Velocidex/velociraptor>Velociraptor for a
spin</a>! It is a available
on GitHub under an open source license. As always please file issues
on the bug tracker or ask questions on our mailing list
<a href=mailto:velociraptor-discuss@googlegroups.com>velociraptor-discuss@googlegroups.com</a>
. You can also chat with us directly on discord
<a href=https://www.velocidex.com/discord>https://www.velocidex.com/discord</a>
.</p><p>There is still time to submit it to this year&rsquo;s <a href=https://docs.velociraptor.app/announcements/2021-artifact-contest/>2021 Velociraptor
Contributor
Competition</a>,
where you can win prizes, honor and support the entire DFIR
community. Alternatively, you can share your artifacts with the
community on <a href=https://docs.velociraptor.app/exchange/>Velociraptor&rsquo;s Artifact
Exchange</a>.</p><footer class=footline></footer></div></div><div id=navigation></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1674201363></script>
<script src=/js/perfect-scrollbar.min.js?1674201363></script>
<script src=/js/perfect-scrollbar.jquery.min.js?1674201363></script>
<script src=/js/jquery.sticky.js?1674201363></script>
<script src=/js/featherlight.min.js?1674201363></script>
<script src=/js/highlight.min.js?1674201363></script>
<script>hljs.highlightAll()</script><script src=/js/modernizr.custom-3.6.0.js?1674201363></script>
<script src=/js/learn.js?1674201363></script>
<script src=/js/hugo-learn.js?1674201363></script></body></html>